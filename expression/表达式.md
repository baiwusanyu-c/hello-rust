# 表达式和语句

**表达式**总是计算并返回一个值，可以将其结果赋值给一个变量，或用作其他变量的一部分。

* 示例：`5+6`、`call_function()`、`{ a + b }`

**语句**执行一些操作，但是不返回任何值。有两种基本的用法：

* 声明变量：let x = 5;
* 表达式语句：表达式跟分号，例如 `some_function();`

在 Rust 中每个 `{}` 块都是一个表达式，可以包含多个语句，最后`{}`表达式为这个块返回值。
***`{}` 的最后一行没有 `;`，就返回最后一行表达式的结果作为块的返回, 否则，返回 `()`。***

## 函数表达式

Rust 中函数使用 fn 关键字声明。例如程序的入口就是 main() 函数。 
在 Rust 中函数和变量名使用 cnake_case 规范进行命令。例如 get_name()

* 多个参数使用逗号分隔；
* 每个参数都要显示的指定类型；
* -> 后声明返回值类型；
* 如果没有声明返回值，返回 ()；
* 函数最后一行使用表达式，那么函数的返回值就是这个表达式的值。(最后一行不用分号结尾，会被当做返回值返回)

## 块表达式

```rust
let y = {
    let x = 1;
    x + 1
};
```

## if / else 

在 Rust 中 if 可以作为表达式来返回值。

```rust
let number = 7;
let result = if number < 5 {
    "less"
} else {
    "more"
};
```

## 循环表达式 - loop、while、for

loop循环会无限重复执行循环体，直到显示的调用 break 退出循环。 
while循环会在给定条件为真时执行循环体，并且每次执行前都会检查这个条件。 for循环是通过迭代器来遍历集合中的元素。

```rust
// loop 循环
let mut num = 10;
// loop 可以返回值
let result = loop {
    num -= 1;
    if num == 0 {
        break "num == 0";
    }
};
// 多个loop循环嵌套，可添加标签
let mut count = 0;
'outer: loop {
    println!("外层循环: {}", count);
    count += 1;
    let mut inner_count = 0;
    'inner: loop {
        println!("内层循环: {}", inner_count);
        inner_count += 1;
        if inner_count == 3 {
            // break 'inner;
            continue 'outer;
        }
        if count == 2 {
            break 'outer;
        }
    }
}

// for 
for elem in [10, 20, 30].iter() {
   println!("{}", elem);
}

```

## 匹配表达式 - match
类似于其他语言的 switch，允许根据表达式的值进行多个模式的匹配。
```rust
let value = 'c';
// 对 value 进行匹配
let description = match value {
    // 条件 => 返回值
   'a'..='z' | 'A'..='Z' => "it's a letter",
   '0'..='9' => "it's a digit",
   _ => "something else",
};

```

## 引用运算符

&用来表示引用，* 运算符用来访问引用所指向的值。 例如 &u64 类型的变量 elem，那么 *elem 的类型为 u64。

## 闭包表达式

```rust
let is_even = |x| x % 2 == 0;
println!("{}", is_even(4)); // 输出: true
println!("{}", is_even(5)); // 输出: false
// |x| 是闭包的参数
// x % 2 == 0 是函数体，直接返回其 bool 值结果
```